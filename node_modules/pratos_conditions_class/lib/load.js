var fs = require('fs');
var oldAccess;
var isFirstLoad=1;
var Accessories = require("pratos_accessories_class");
const path = __dirname.replace('/node_modules/pratos_conditions_class', '');
module.exports=load;
function load(globalVariable){
	var pathTo = __dirname.replace('/node_modules/pratos_conditions_class/lib', '/node_modules/pratos_conditions_class');
	fs.readFile(pathTo+'/recipes.json','utf8', function(err, result){
		var data = JSON.parse(result),
		recipseNames = Object.keys(data.recipes),
		nRecipse = recipseNames.length;
		for(var d=0;d<nRecipse;d++){
				var e = require(pathTo+'/recipes/'+ recipseNames[d]+".js");
				e.init(globalVariable);
		}
	});
}
function isJson(str) { //function to know if a variable is JSON 
    try {
        JSON.parse(str);
    } catch (e) {
		console.log(str);
        return false;
    }
    return true;
}