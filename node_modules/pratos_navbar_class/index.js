const path = __dirname.replace('/node_modules/pratos_navbar_class', '');
var nav = Object();
module.exports = {
	construct : function(plugins,callback){
		this.create_default_link("Accueil", '<i class="fa fa-home" aria-hidden="true"></i>', '/');
		this.create_default_link("Accessoires", '<i class="fa fa-lightbulb-o" aria-hidden="true"></i>', '/admin/manage_accessories/');
		this.create_group("Utilisateurs", '<i class="fa fa-user" aria-hidden="true"></i>');
		this.create_grouped_link("Se déconnecter", '<i class="fa fa-sign-out" aria-hidden="true"></i>', '/user_disconnect/','Utilisateurs');
		this.create_grouped_link("Autoriser", '<i class="fa fa-unlock-alt" aria-hidden="true"></i>', '/admin/allow_device/','Utilisateurs');
		this.create_grouped_link("Dé-autoriser", '<i class="fa fa-lock" aria-hidden="true"></i>', '/admin/unallow_device/','Utilisateurs');
		this.create_grouped_link("Ban", '<i class="fa fa-ban" aria-hidden="true"></i>', '/admin/manage_ban/','Utilisateurs');
		this.create_default_link("Réglages", '<i class="fa fa-cog" aria-hidden="true"></i>', '/admin/settings/');
		var pluginsName = Object.keys(plugins);
		var pluginsSize = pluginsName.length;
		for(var u = 0; u < pluginsSize; u++){
		require(plugins[pluginsName[u]]).navbar(this);
		if(u == (pluginsSize - 1)){ 
			callback(nav);
		}
}
if(pluginsSize == 0){
callback(nav);
}
	},
	create_default_link : function(name, icon, link){
		nav[name] = Object();
		nav[name].icon = icon;
		nav[name].link = link;
		return true;
	},
	create_group : function(name, icon){
		if(!nav[name]){
			nav[name] = Object();
			nav[name].icon = icon;
			nav[name].is_group = true;
		}
		return true;
	},
	create_grouped_link : function(name, icon, link, group){
		if(nav[group]){
			nav[group][name] = Object();
			nav[group][name].icon = icon;
			nav[group][name].link = link;
			return true;
		}
		else{
			return "Group must exist";
		}
	},
};
