<% title('Continuous Integration')
   stylesheet('/stylesheets/mdns.css')
   stylesheet('/stylesheets/build_status.css')

status_glyphs =
  { success: '&#x2713;'
  , warning: '!'
  , failed: '&#x2717;'
  , not_run: '-'
  }
function status(stage) {
  var s = stage ? stage.status : 'not_run'
  return "<div class='build_badge " + s + "'><span>" + status_glyphs[s] + "</span></div>";
}
%>

<div class='build_status'>
  <hgroup>
    <h1>Build <%= latest.id %></h1>
  </hgroup>

  <div><%= latest.testSummary %></div>

  <div>
    <table class='status_table'><tbody>
      <tr>
        <th style='vertical-align: top'></th>
         <% Object.keys(os).forEach(function(os) { %>
           <th><%- logos[os] %></th>
         <% }) %>
      </tr>
      <% latestStages.forEach(function(nodeversion, i) { console.log(versions]);%>
        <tr>
          <th>node v<%= versions[1] %></th>
          <% for (var i = 0; i < nodeversion.length; ++i) { %>
          <td><%- status(nodeversion[i]) %></td>
          <% } %>
        </tr>
      <% }) %>
    </tbody></table>
  </div>

  <div><%= latest.revision %></div>
  <div><%= new Date(latest.timestamp) %></div>
</div>


