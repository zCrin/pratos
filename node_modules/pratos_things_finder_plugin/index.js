const path = __dirname.replace('/node_modules/pratos_things_finder_plugin', ''); 
var User = require("pratos_user_class");
var fs = require('fs');
module.exports = {
	config:function(){

		var conf = Object();
		conf.GET = true;
		conf.on_homepage = true;
conf.navbar = true;
conf.on_content = true;
		return conf;
	},
navbar:function(nav){
		nav.create_default_link("Things Finder", '<i class="fa fa-search" aria-hidden="true"></i>', '/pratos_things_finder/');
	},
get:function(app, globalVariable){
		app.get('/pratos_things_finder/', function(req, res) {
User.verify_connection(req.user_id,globalVariable, function(user_res){
			if(user_res == true){
res.setHeader('Content-Type', 'text/html');
fs.readFile( __dirname + '/index.ejs', 'utf8', function(err, data){
			res.end(data);
});
		
}
			else{
				res.redirect('/');
				delete globalVariable[req.user_id];
			}
		});
});
app.get('/things_finder.js', function(req, res) {
res.setHeader('Content-Type', 'application/javascript');
res.end("+");
});
},
	content:function(link){
		
link["things_finder1"]={"page":"admin/index","script":" <script src='/things_finder.js'></script>"};

		return link;
	},
	homepage:function(homepage){
		homepage.createBox("Things Finder", "<p style='padding: 3%; text-align: center;'>Searching for accessories.<br /> Please wait ...</p>", true);
	}

};