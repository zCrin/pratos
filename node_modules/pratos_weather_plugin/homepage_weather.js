var loadedSlick  =0;
$.get("/weatherNeedsLocation",function(data){
if(data == 0){
show_data("<p style='font-size:130%;padding:8% 3%; line-height: 200%; text-align:center;'>No API Key registered<br />To add one, please go to <a href='/admin/settings/'>Settings/Weather</a></p>");
}
else if(data=='yes'){

if (navigator.geolocation) {

        navigator.geolocation.getCurrentPosition(function(position){

$.get("/weatherApiGetData?long="+ position.coords.longitude+"&lat="+ position.coords.latitude,function(data){
dealData(data);
});
},function(error){show_data("<p style='font-size:130%;padding:8% 3%; line-height: 200%; text-align:center;'> There was an error while fecthing location.<br />Please make sure the URL is https.<br />You may want to set a fixed location here <a href='/admin/settings/'>Settings/Weather</a></p>");});
    } else {
show_data("<p style='font-size:130%;padding:8% 3%; line-height: 200%; text-align:center;'> Geolocation is not supported by this browser .<br />You may want to set a default location here <a href='/admin/settings/'>Settings/Weather</a></p>");
       
    }
}else{
$.get("/weatherApiGetData",function(data){
dealData(data);
});
}

});
function show_data(data){

if(corres){
if(corres.length == 1){
				$('#Weather_plugin > .content').html(data);
}
else{
if(! loadedSlick){
setTimeout(function(){$('#slick-slide0'+corres['Weather'] + ' > .content'). html(data); loadedSlick=1;},3000);
}else{
$('#slick-slide0'+corres['Weather'] + ' > .content'). html(data);
}
}
}else{
				$('#Weather_plugin > .content'). html(data);
}
}
function dealData(data){

}