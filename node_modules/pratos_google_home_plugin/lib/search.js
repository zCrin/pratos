var mdns = require('mdns');
//.excludeInterface('0.0.0.0');
  var browser = mdns.createBrowser(mdns.tcp('googlecast'))
//doit modifier mdns avec 
function search(waitTime = 1000,callback) {

  var services = {}

  browser.start();
  browser.on('serviceUp', function(service){
	if(service.txtRecord.md == 'Google Home'){
		services[service.txtRecord.fn]=service.addresses[0];
		
	}
});
setTimeout(function(){callback(services); browser.stop()}, waitTime);

}
function searchByName(name,callback){
search(1000,function(data){
callback(data[name]);

});
}
module.exports = {search, searchByName};
